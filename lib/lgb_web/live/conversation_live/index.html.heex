<.page_align>
  <div id="conversation" phx-update="stream">
    <div :for={{dom_id, conversation} <- @streams.conversations} id={dom_id}>
      <.link patch={~p"/conversations/#{conversation.id}"}>
        <.list_tile
          title={conversation.other_profile.handle}
          subtitle={conversation.last_message.content}
          picture_url={
            Lgb.Profiles.ProfilePicture.get_picture_url(conversation.other_profile.first_picture)
          }
          read={conversation.last_message.read}
        >
          <:trailer>
            <div class="flex items-center justify-between sm:justify-end w-full sm:w-auto gap-2">
              <span class="text-sm sm:text-base text-gray-500">
                {Calendar.strftime(conversation.last_message.inserted_at, "%I:%M %p")}
              </span>
            </div>
          </:trailer>
        </.list_tile>
      </.link>
    </div>
  </div>
</.page_align>
